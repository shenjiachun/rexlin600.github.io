---
layout: post
title: "2. IoC"
date: 1997-07-01
categories: Spring
tags: Spring
excerpt: Spring基础概述
mathjax: true
---

### 什么是 IoC 容器

> 当前比较知名的 IoC 容器有：Pico Container、Avalon 、Spring、JBoss、HiveMind、EJB 等。

Spring 框架中的`IoC`（控制反转，`Inversion of Control`）。请注意，`IoC`也被称为`DI`（依赖注入，`Dependency Injection`），还有一种方式叫`Dl`（依赖查找，`Dependency Lookup`）。

IoC 是一个过程，通过这个过程，对象定义他们的依赖关系，即他们所使用的其他对象，只能通过构造函数参数、工厂方法的参数、或者在构造器或从工厂方法返回后在对象实例上设置的参数。

> 前提：比如，我们实例化一个对象 A，这个对象依赖了 B、B 依赖了 C。
>
> 分析：我们在实例化 A 前就必须先去实例化 B；同理，实例化 B 之前我们又必须去实例化 B 所依赖的 C
>
> 通俗解释：那么 IoC 给我们带来的改变就是我们在实例化 A 时，不需要去主动的实例化 B、C 等，IoC 容器会帮助我们实例化 B、C 并注入到 A 中，这就是我们讲的`控制反转`或者说`依赖注入`

然后容器在创建这些 bean 时注入这些依赖项，这个过程基本是相反的，所以称之为控制反转（IoC）：`bean本身通过使用类的直接构造或诸如服务定位器模式之类的机制来控制其依赖关系的实例化或位置`。

**问题：既然 IoC 时控制反转，那么是哪些方面被反转了呢？**

> 回答：`获得依赖对象的过程被反转了`。控制被反转之后，获得依赖对象的过程由自身管理变为了由 IOC 容器主动注入。于是，他给“控制反转”取了一个更合适的名字叫做“依赖注入（Dependency Injection）”。他的这个答案，实际上给出了实现 IOC 的方法：注入。`所谓依赖注入，就是由 IOC 容器在运行期间，动态地将某种依赖关系注入到对象之中`。

**_划重点：依赖注入(DI)和控制反转(IOC)是从不同的角度的描述的同一件事情，就是指通过引入 IOC 容器，利用依赖关系注入的方式，实现对象之间的解耦。_**

参考文章：[依赖注入参考文章](https://www.martinfowler.com/articles/injection.html)

### 